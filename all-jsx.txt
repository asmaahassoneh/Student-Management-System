import "./styles/App.css";
import { Routes, Route } from "react-router-dom";
import Navbar from "./components/Navbar";
import Home from "./pages/Home";
import Students from "./pages/Students";
import StudentDetails from "./pages/StudentDetails";
import About from "./pages/About";
import RandomUser from "./pages/RandomUser";
import NotFound from "./pages/NotFound";

function App() {
  return (
    <>
      <Navbar />

      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/students" element={<Students />} />
        <Route path="/students/:id" element={<StudentDetails />} />
        <Route path="/about" element={<About />} />
        <Route path="/random-user" element={<RandomUser />} />
        <Route path="*" element={<NotFound />} />
      </Routes>
    </>
  );
}

export default App;
import ReactDOM from "react-dom/client";
import { BrowserRouter } from "react-router-dom";
import { StudentProvider } from "./context/StudentProvider";
import App from "./App";

ReactDOM.createRoot(document.getElementById("root")).render(
  <BrowserRouter>
    <StudentProvider>
      <App />
    </StudentProvider>
  </BrowserRouter>,
);
import { NavLink } from "react-router-dom";
import "../styles/navbar.css";

function Navbar() {
  return (
    <nav className="navbar">
      <div className="nav-container">
        <div className="logo">Student Management System</div>

        <div className="links">
          <NavLink to="/" end>
            Home
          </NavLink>
          <NavLink to="/students">Students</NavLink>
          <NavLink to="/about">About</NavLink>
          <NavLink to="/random-user">Random User</NavLink>
        </div>
      </div>
    </nav>
  );
}

export default Navbar;
import { toast } from "react-toastify";
import { useStudents } from "../context/useStudents";
import useForm from "../hooks/useForm";
import { validateStudent } from "../utils/studentUtils";

function StudentForm() {
  const { addStudent } = useStudents();

  const { values, handleChange, resetForm } = useForm({
    name: "",
    email: "",
    major: "",
    gpa: "",
  });

  const handleSubmit = async (e) => {
    e.preventDefault();

    const result = validateStudent(values);
    if (!result.ok) {
      toast.error(result.message);
      return;
    }

    try {
      await addStudent(result.data);
      toast.success("Student Registered Successfully!");
      resetForm();
    } catch (e) {
      toast.error("Failed to add student" + e);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="form-grid">
      <input
        name="name"
        placeholder="Full Name"
        value={values.name}
        onChange={handleChange}
        required
      />
      <input
        name="email"
        placeholder="Email Address"
        value={values.email}
        onChange={handleChange}
        required
      />
      <input
        name="major"
        placeholder="Major"
        value={values.major}
        onChange={handleChange}
        required
      />
      <input
        name="gpa"
        type="number"
        step="0.1"
        placeholder="GPA (0 - 4)"
        value={values.gpa}
        onChange={handleChange}
        required
      />
      <button type="submit">Register Student</button>
    </form>
  );
}

export default StudentForm;
import { memo } from "react";

const StudentRow = memo(function StudentRow({ student, onView, onDelete }) {
  return (
    <tr>
      <td data-label="Name">{student.name}</td>
      <td data-label="Email">{student.email}</td>
      <td data-label="Major">{student.major}</td>
      <td data-label="GPA">{student.gpa}</td>
      <td data-label="Actions">
        <button onClick={() => onView(student.id)}>View</button>
        <button onClick={() => onDelete(student.id)}>Delete</button>
      </td>
    </tr>
  );
});

function StudentList({ students, onView, onDelete }) {
  if (students.length === 0) {
    return <p className="empty-message">No students registered yet.</p>;
  }

  return (
    <div className="table-wrapper">
      <table className="student-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Major</th>
            <th>GPA</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          {students.map((student) => (
            <StudentRow
              key={student.id}
              student={student}
              onView={onView}
              onDelete={onDelete}
            />
          ))}
        </tbody>
      </table>
    </div>
  );
}

export default memo(StudentList);
import { useEffect, useMemo, useState, useCallback } from "react";
import { StudentContext } from "./StudentContext";
import { studentsApi } from "../services/studentsApi";

export function StudentProvider({ children }) {
  const [students, setStudents] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchStudents = async () => {
      try {
        setLoading(true);
        setError(null);

        const res = await studentsApi.getAll();
        setStudents(res.data);
      } catch (e) {
        setError("Failed to load students" + e);
      } finally {
        setLoading(false);
      }
    };

    fetchStudents();
  }, []);

  const addStudent = useCallback(async (student) => {
    try {
      setError(null);
      const res = await studentsApi.create({ ...student });
      setStudents((prev) => [...prev, res.data]);
    } catch (e) {
      setError("Failed to add student");
      throw e;
    }
  }, []);

  const deleteStudent = useCallback(async (id) => {
    try {
      setError(null);
      await studentsApi.remove(id);
      setStudents((prev) => prev.filter((s) => String(s.id) !== String(id)));
    } catch (e) {
      setError("Failed to delete student");
      throw e;
    }
  }, []);

  const updateStudent = useCallback(async (id, updatedStudent) => {
    try {
      setError(null);
      const res = await studentsApi.update(id, updatedStudent);
      setStudents((prev) =>
        prev.map((s) => (String(s.id) === String(id) ? res.data : s)),
      );
    } catch (e) {
      setError("Failed to update student");
      throw e;
    }
  }, []);

  const value = useMemo(
    () => ({
      students,
      loading,
      error,
      addStudent,
      deleteStudent,
      updateStudent,
    }),
    [students, loading, error, addStudent, deleteStudent, updateStudent],
  );

  return (
    <StudentContext.Provider value={value}>{children}</StudentContext.Provider>
  );
}
function About() {
  return (
    <div className="about">
      <div className="about-content">
        <h1>About This Project</h1>
        <p>Hey There I'm Asmaa...</p>
      </div>
    </div>
  );
}

export default About;
function Home() {
  return (
    <div className="home">
      <div className="home-content">
        <h1>Welcome to Student Management System</h1>
        <p>This is the Home Page</p>
      </div>
    </div>
  );
}

export default Home;
function NotFound() {
  return <h2>404 - Page Not Found</h2>;
}

export default NotFound;
import useFetch from "../hooks/useFetch";
import { useCallback, useState } from "react";

function RandomUser() {
  const { data, loading, error } = useFetch("http://localhost:3001/students");
  const [randomStudent, setRandomStudent] = useState(null);

  const pickRandom = useCallback(() => {
    if (!data || data.length === 0) return;

    const randomIndex = Math.floor(Math.random() * data.length);
    setRandomStudent(data[randomIndex]);
  }, [data]);

  return (
    <div style={{ textAlign: "center", padding: "40px" }}>
      <h1>Random Student</h1>

      {loading && <p>Loading...</p>}
      {error && <p style={{ color: "red" }}>❌ {error}</p>}

      {!loading && !error && (!data || data.length === 0) && (
        <p>No students found.</p>
      )}

      {randomStudent && (
        <div className="card">
          <h2>{randomStudent.name}</h2>
          <p>Email: {randomStudent.email}</p>
          <p>Major: {randomStudent.major}</p>
          <p>GPA: {randomStudent.gpa}</p>
        </div>
      )}

      <button
        onClick={pickRandom}
        style={{ marginTop: "20px" }}
        disabled={loading || !data?.length}
      >
        {randomStudent ? "Get Another Random Student" : "Pick a Random Student"}
      </button>
    </div>
  );
}

export default RandomUser;
import { useEffect, useMemo, useState } from "react";
import { useParams, useNavigate } from "react-router-dom";
import { toast } from "react-toastify";
import { useStudents } from "../context/useStudents";
import { validateStudent } from "../utils/studentUtils";

function StudentDetails() {
  const { id } = useParams();
  const navigate = useNavigate();

  const studentId = String(id);

  const { students, loading, error, updateStudent } = useStudents();

  const student = useMemo(
    () => students.find((s) => String(s.id) === studentId),
    [students, studentId],
  );

  const [isEditing, setIsEditing] = useState(false);
  const [saving, setSaving] = useState(false);

  const [form, setForm] = useState({
    name: "",
    email: "",
    major: "",
    gpa: "",
  });

  useEffect(() => {
    if (student) {
      setForm({
        name: student.name ?? "",
        email: student.email ?? "",
        major: student.major ?? "",
        gpa: student.gpa ?? "",
      });
    }
  }, [student]);

  const handleChange = (e) => {
    const { name, value } = e.target;
    setForm((prev) => ({ ...prev, [name]: value }));
  };

  const handleCancel = () => {
    if (!student) return;
    setForm({
      name: student.name ?? "",
      email: student.email ?? "",
      major: student.major ?? "",
      gpa: student.gpa ?? "",
    });
    setIsEditing(false);
  };

  const handleSave = async () => {
    const result = validateStudent(form);
    if (!result.ok) {
      toast.error(result.message);
      return;
    }

    try {
      setSaving(true);

      const payload = {
        ...student,
        ...result.data,
      };

      await updateStudent(studentId, payload);

      toast.success("Student updated successfully!");
      setIsEditing(false);
    } catch (e) {
      toast.error("Failed to update student" + e);
    } finally {
      setSaving(false);
    }
  };

  // Global loading/error from provider (fetching students)
  if (loading) {
    return (
      <div className="details-card">
        <h2>Loading...</h2>
        <button className="back-btn" onClick={() => navigate("/students")}>
          Back to Students
        </button>
      </div>
    );
  }

  if (error) {
    return (
      <div className="details-card">
        <h2 style={{ color: "red" }}>❌ {error}</h2>
        <button className="back-btn" onClick={() => navigate("/students")}>
          Back to Students
        </button>
      </div>
    );
  }

  if (!student) {
    return (
      <div className="details-card">
        <h2>Student not found</h2>
        <button className="back-btn" onClick={() => navigate("/students")}>
          Back to Students
        </button>
      </div>
    );
  }

  return (
    <div className="details-container">
      <div className="details-card">
        <h2 className="details-title">Student Details</h2>

        {!isEditing ? (
          <>
            <div className="detail-item">
              <span>Name</span>
              <p>{student.name}</p>
            </div>

            <div className="detail-item">
              <span>Email</span>
              <p>{student.email}</p>
            </div>

            <div className="detail-item">
              <span>Major</span>
              <p>{student.major}</p>
            </div>

            <div className="detail-item">
              <span>GPA</span>
              <p>{student.gpa}</p>
            </div>

            <div style={{ display: "flex", gap: 10, marginTop: 16 }}>
              <button
                className="back-btn"
                onClick={() => navigate("/students")}
              >
                ← Back to Students
              </button>

              <button className="back-btn" onClick={() => setIsEditing(true)}>
                ✏️ Edit
              </button>
            </div>
          </>
        ) : (
          <>
            <div className="detail-item">
              <span>Name</span>
              <input
                name="name"
                value={form.name}
                onChange={handleChange}
                placeholder="Full Name"
              />
            </div>

            <div className="detail-item">
              <span>Email</span>
              <input
                name="email"
                value={form.email}
                onChange={handleChange}
                placeholder="Email Address"
              />
            </div>

            <div className="detail-item">
              <span>Major</span>
              <input
                name="major"
                value={form.major}
                onChange={handleChange}
                placeholder="Major"
              />
            </div>

            <div className="detail-item">
              <span>GPA</span>
              <input
                name="gpa"
                type="number"
                step="0.1"
                value={form.gpa}
                onChange={handleChange}
                placeholder="0 - 4"
              />
            </div>

            <div style={{ display: "flex", gap: 10, marginTop: 16 }}>
              <button
                className="back-btn"
                onClick={handleCancel}
                disabled={saving}
              >
                Cancel
              </button>

              <button
                className="back-btn"
                onClick={handleSave}
                disabled={saving}
              >
                {saving ? "Saving..." : "Save"}
              </button>
            </div>
          </>
        )}
      </div>
    </div>
  );
}

export default StudentDetails;
import { useMemo, useState, useCallback } from "react";
import { ToastContainer } from "react-toastify";
import StudentForm from "../components/StudentForm";
import StudentList from "../components/StudentList";
import "react-toastify/dist/ReactToastify.css";
import { useStudents } from "../context/useStudents";
import { useNavigate } from "react-router-dom";

function Students() {
  const { students, loading, error, deleteStudent } = useStudents();
  const navigate = useNavigate();

  const [search, setSearch] = useState("");
  const [filterMajor, setFilterMajor] = useState("");

  const handleView = useCallback(
    (id) => navigate(`/students/${id}`),
    [navigate],
  );

  const handleDelete = useCallback((id) => deleteStudent(id), [deleteStudent]);

  const filteredStudents = useMemo(() => {
    const s = search.trim().toLowerCase();
    const m = filterMajor.trim().toLowerCase();

    return students.filter((student) => {
      const matchesSearch = s
        ? (student.name ?? "").toLowerCase().includes(s)
        : true;

      const matchesMajor = m
        ? (student.major ?? "").toLowerCase().includes(m)
        : true;

      return matchesSearch && matchesMajor;
    });
  }, [students, search, filterMajor]);

  if (loading) {
    return (
      <div className="container">
        <h1>Student Dashboard</h1>
        <p>Loading students...</p>
      </div>
    );
  }

  if (error) {
    return (
      <div className="container">
        <h1>Student Dashboard</h1>
        <p style={{ color: "red" }}>❌ {error}</p>
      </div>
    );
  }

  return (
    <div className="container">
      <h1>Student Dashboard</h1>

      <StudentForm />

      <div className="filters">
        <input
          placeholder="Search by name..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
        />

        <input
          placeholder="Filter by major..."
          value={filterMajor}
          onChange={(e) => setFilterMajor(e.target.value)}
        />
      </div>

      <StudentList
        students={filteredStudents}
        onView={handleView}
        onDelete={handleDelete}
      />

      <ToastContainer />
    </div>
  );
}

export default Students;
